/* https://www.axel-hahn.de/ */
function initDrawH3list(){var d="";var a=".sidebar-menu>li.active>span.submenu";var c=false;var b=0;$("h3").each(function(){c=this.id?this.id:"h3"+this.innerHTML.replace(/\W/g,"");if(!this.id){this.id=c}if(this.id!=="h3menu"){b++;d+='<li><a href="#'+c+'" class="scroll-link"><i class="fas fa-angle-right"></i>&nbsp;'+this.innerHTML.replace(/(<([^>]+)>)/ig,"")+"</a></li>"}});if(b<2){d="";$(a).hide()}else{$(a).html('<ul class="treeview-menu" style="display: block;">'+d+"</ul>")}}function initSoftscroll(){$(function(){$("a.scroll-link").click(function(){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var a=$(this.hash);a=a.length?a:$("[name="+this.hash.slice(1)+"]");if(a.length){$("html,body").animate({scrollTop:a.offset().top-30},300);return false}}})})}function filterServer(a){var c=0;if(a==="null"){a=""}localStorage.setItem("apachestatusFilterServer",a);$("#serverlist ul li a").each(function(){if(!a||$(this).html().indexOf(a)>=0){c++;$(this).css("display","block")}else{$(this).css("display","none")}});$("#srvcounter").html(a?c:"");$("#serverlist ul li.active a").each(function(){$(this).css("display","block")});var b=c<25;$("#serverlist>li ").each(function(){b?$(this).removeClass("dropdown-submenu"):$(this).addClass("dropdown-submenu");$(this).attr("onmouseover",b?"":"$(this).addClass('open');");$(this).attr("onmouseout",b?"":"$(this).removeClass('open');")});$("#serverlist li ul").each(function(){b?$(this).removeClass("dropdown-menu"):$(this).addClass("dropdown-menu");iCountItems=$(this).find("li>a").length;iCountVisibleItems=0;oUL=$(this);$(oUL).find("li>a").each(function(){if($(this).css("display")==="block"){iCountVisibleItems++}});sInfotext=iCountVisibleItems!=iCountItems?iCountVisibleItems+"/ "+iCountItems:iCountItems;$(oUL).prev().children(".info").html(" ("+sInfotext+")");$(oUL).prev().css("display",iCountVisibleItems?"block":"none")})}function initServerFilter(){var b=0;$("#serverlist li").each(function(){b++});var a=localStorage.getItem("apachestatusFilterServer")+"";if(a===undefined){a=""}if(b>5){$("#serverlist >li>a").append('<span class="info" style="margin-right: 1em;">-</span>');var c='<li><form class="form-inline">\n            <div class="form-group" style="margin-bottom: 0.5em; min-width: 20em;">\n                <input type="text" id="esrvfilter" style="margin-left: 1em;" \n                    onkeypress="filterServer(this.value);" class="form-control" onkeydown="filterServer(this.value);" onkeyup="filterServer(this.value);" \n                    placeholder="'+aLang.srvFilterPlaceholder+'"\n                    value="'+a+'" />\n                <span id="srvcounter"></span>\n            </div></form></li>';$("#serverlist").prepend(c)}filterServer(a)}function initTileProgress(){var b=false;var a=false;$(".progress-bar").each(function(){sId=$(this).attr("id").replace(/^progress\-/,"");sSrv=sId.replace(/\-.*/,"");b=sId.replace(/^.*\-/,"");if(b){var c=new counterhistory(sSrv,b);a=c.getLast(50);aDataLast=c.getLast(1);currentVal=aDataLast.max;if(a){$("#progress-"+sId).css("width",(currentVal/a.max*100)+"%")}}})}function initPage(){initDrawH3list();initSoftscroll();initServerFilter();initTileProgress();$("body").append('<div id="'+sDivPlotter+'" class="plotter"></div>')}function showTab(a){mydiv=".subh2 ";$(mydiv+" > h3").hide();$(mydiv+" > .subh3").hide();$(mydiv+" > "+a).show();$(mydiv+" > "+a+" + div.subh3").show();$(mydiv+" li a").blur();return false}var sDivPlotter="divPlotter";var bPlotterSticky=false;function stickyGraph(d,b,c){var a=bPlotterSticky;bPlotterSticky=false;$("#"+sDivPlotter+" .btnclose").hide();showGraph(d,b,c);if(!a){bPlotterSticky=true;$("#"+sDivPlotter+" .btnclose").show()}}function showGraphInline(j,k,a,n,m,q){var s=new counterhistory(k,a);var d=s.getLast(n);var o=j+"-chart";if(!d||!d.data||!d.data.length||d.min===false){return false}var f="",c="",h="",e="",l=[],b="";for(var r=(d.data.length-1);r>=0;r--){var t=d.data[r];l.push(new Date(t[0]));f+=(f?", ":"")+(t[1]/1===t[1]?t[1]:'"'+t[1]+'"');c+=(c?", ":"")+d.avg;h+=(h?", ":"")+(q?q:d.max);e+=(e?", ":"")+d.min}if(aLang){b+="values: "+d.data.length+"<br>";b+=(aLang.statsCurrent)?aLang.statsCurrent+": "+d.data[0][1]+"<br>":"";b+=(aLang.statsMin)?aLang.statsMin+": "+d.min+"<br>":"";b+=(aLang.statsMax)?aLang.statsMax+": "+d.max+"<br>":"";b+=(aLang.statsAvg)?aLang.statsAvg+": "+d.avg+"<br>":""}$("#"+j).html('<div class="infos">'+b+'</div><canvas id="'+o+'"></canvas>');var p=document.getElementById(o).getContext("2d");var g=new Chart(p,{type:"bar",data:{labels:l,datasets:[{type:"line",data:JSON.parse("["+c+"]"),borderColor:"#e0a010",borderWidth:1,borderDash:[3,3],fill:false,radius:0},{type:"line",data:JSON.parse("["+e+"]"),borderColor:"#008000",borderWidth:1,borderDash:[3,3],fill:false,radius:0},{type:"line",data:JSON.parse("["+h+"]"),borderColor:"#ff0000",borderWidth:1,borderDash:[3,3],fill:false,radius:0},{type:"bar",label:m,data:JSON.parse("["+f+"]"),backgroundColor:"#80d0f4",lineTension:0,radius:0}]},options:{animation:{duration:0},legend:{display:false},scales:{xAxes:[{display:false}],yAxes:[{ticks:{beginAtZero:true,max:(q?q:d.max)}}]},title:{display:false,text:m}}});return true}function showGraph(c,a,b){if(bPlotterSticky){return false}var d='<div class="btnclose" onclick="hideGraph(1);"> X </div><div class="title">'+b+'</div><div id="hovergraph" class="graph"></div>';$("#"+sDivPlotter).html(d).show();if(!showGraphInline("hovergraph",c,a,50,b)){$("#"+sDivPlotter).hide()}}function hideGraph(a){if(a){bPlotterSticky=false}if(bPlotterSticky){return false}$("#"+sDivPlotter).hide()}function twodigits(a){return a>9?a:"0"+a};